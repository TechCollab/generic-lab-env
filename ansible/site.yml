---
- name: Provision all lab VMs with common configuration
  hosts: all
  become: true
  roles:
    - geerlingguy.ntp
    - geerlingguy.firewall
  vars:
    ntp_enabled: true
    ntp_timezone: Europe/Sofia
    ntp_manage_config: false
    ntp_servers:
      - 0.pool.ntp.org iburst
      - 1.pool.ntp.org iburst
      - 2.pool.ntp.org iburst
      - 3.pool.ntp.org iburst

    firewall_allowed_tcp_ports:
      - "22"

- name: Provision lab infra - DNS, NFS, HTTP services
  hosts: latin:crack
  become: true
  roles:
    - geerlingguy.firewall
  vars:
    firewall_allowed_tcp_ports:
      - "53"
    firewall_allowed_udp_ports:
      - "53"

